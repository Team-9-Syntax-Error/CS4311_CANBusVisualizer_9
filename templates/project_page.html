<html>
   <head>
      <title>Project Page</title>
   </head>
   <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='Project_Page.css')}}">
   <body>

      <div class="navbar">

         <!-- DROPDOWN FOR FILE -->
         <div class="dropdown">
           <button class="dropbtn">File 
             <i class="fa fa-caret-down"></i>
           </button>
           <div class="dropdown-content">
             <a href="#">Save Project</a>
             <a href="#">Open Saved Packets</a>
             <a href="edit_config">Edit Configurations</a>
           </div>
         </div> 

         <!-- DROPDOWN FOR VIEW -->
         <div class="dropdown">
            <button class="dropbtn">View 
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="#">Filter Packets</a>
              <a href="#">Sort Packets</a>
            </div>
          </div> 

          <!-- DROPDOWN FOR PACKETS -->
          <div class="dropdown">
            <button class="dropbtn">Packets 
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <a id = "edit" onclick="myfunction_clickevent_edit(); openForm();">Edit Packet</a>

              <div class="form-popup" id="myForm">
                <form action="/project_page.html" class="form-container">
                  <h2>Edit Packet</h2>

                  <label for="name"><b>Name:</b></label>
                  <input type="text" placeholder="Name" name="name" required>

                  <label for="id"><b>ID:</b></label>
                  <input type="text" placeholder="ID" name="id" required>

                  <label for="data"><b>Data:</b></label>
                  <input type="text" placeholder="Data" name="data" required>

                  <button type="submit" class="btn">Accept</button>
                  <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                </form>
              </div>

              <a id = "save" onclick="myfunction_clickevent_save()">Save Packet</a>
              <a id = "annotate" onclick="myfunction_clickevent_annotate()">Annotate Packet</a>
            </div>

          </div> 
        </div>

      <!-- CONTAINER FOR PACKET TABLE -->
      <button id = "replay" onclick="myfunction_clickevent_replay()">Replay Packet</button>
      

       <div class="myBox" id="box">
        <table class="table" id = "tab">
          <tr class="table__header">
            {% for header in headings %}
            <th class="table__cell">{{ header}}</th>
            {% endfor %}
          </tr>
          {% for row in data %}
          <tr class="table__row">
             {% for cell in row %}
             <td contenteditable="true" class="table__cell">{{ cell }}</td>
             {% endfor%}
          <tr>      
          {% endfor %}
        </table>
      </div>

      <!-- CONTAINER FOR MAP -->
      <div class="myBox2" id="box2">
        <body onload="init()">
          <div id="myDiagramDiv" class = "myDiagram"></div>
          </body>
      </div> 

     

      <div w3-include-html="graph.html"></div>


      <element onload="myfunction_onload">
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
      <button type="submit" class= "button2" onclick='myfunction_clickevent_send()'>Send</button>
      
      <script>
        function myfunction_onload(){
            $.ajax({
                url: "main.py",
                 context: document.body
                })
            }
        </script>
    
    <script>
        function myfunction_clickevent_send(){
          $('#tab').load(document.URL +  ' #tab');
            $.ajax({
                url:"/send",
                context: document.body});}
    </script>


<script>
  function myfunction_clickevent_edit(){
      $.ajax({
          url:"/edit",
          context: document.body});  
          }
</script>

<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
  }
</script>

<script>
  function myfunction_clickevent_replay(){
      $.ajax({
          url:"/replay",
          context: document.body});}
</script>
<script>
  function myfunction_clickevent_save(){
      $.ajax({
          url:"/save",
          context: document.body});}
</script>
<script>
  function myfunction_clickevent_annotate(){
      $.ajax({
          url:"/annotate",
          context: document.body});}

</script>



<script src="https://unpkg.com/gojs/release/go-debug.js"></script>

        <script>
    
            function init(){
                var $ = go.GraphObject.make;
                myDiagram = $(go.Diagram, "myDiagramDiv");
                myDiagram.nodeTemplate =
                new go.Node("Horizontal",
                    // the entire node will have a light-blue background
                    { background: "#44CCFF" })
                    .add(new go.Picture(
                        // Pictures should normally have an explicit width and height.
                        // This picture has a red background, only visible when there is no source set
                        // or when the image is partially transparent.
                        { margin: 10, width: 50, height: 50, background: "black" })
                        // Picture.source is data bound to the "source" attribute of the model data
                        .bind("source"))
                    .add(new go.TextBlock(
                        "Default Text",  // the initial value for TextBlock.text
                        // some room around the text, a larger font, and a white stroke:
                        { margin: 12, stroke: "white", font: "bold 16px sans-serif" })
                        // TextBlock.text is data bound to the "name" property of the model data
                        .bind("text", "name"));
                        
                        myDiagram.linkTemplate =
                        new go.Link(
                            // default routing is go.Link.Normal
                            // default corner is 0
                            { routing: go.Link.Orthogonal, corner: 5 })
                            // the link path, a Shape
                            .add(new go.Shape({ strokeWidth: 3, stroke: "#555" }))
                            // if we wanted an arrowhead we would also add another Shape with toArrow defined:
                            //.add(new go.Shape({  toArrow: "Standard", stroke: null  }))
                        // it's best to declare all templates before assigning the model
                        myDiagram.model = new go.TreeModel(
                        [   {key: "0",               name: "Bus Termination"},
                            { key: "1", parent:"0",  name: "Airbag"},
                            { key: "2", parent:"7",  name: "brake"},
                            { key: "3", parent: "0", name: "engine"},
                            { key: "4", parent: "7", name: "lights"},
                            { key: "5", parent: "0", name: "oil"},
                            { key: "6", parent: "7", name: "transmission"},
                            { key: "7", parent: "0", name: "Bus Termination"}
                        ]);
            }
        </script>




</body>
</html>